name: Xcode Build (Xcode 16)

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]

jobs:
  build:
    runs-on: macos-14

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Resolve Swift Packages
        run: |
          xcodebuild -resolvePackageDependencies \
            -project ltech.xcodeproj \
            -scheme ltech

      - name: Build for iOS Simulator (iPhone 16, OS 18.4)
        run: |
          xcodebuild clean build \
            -project ltech.xcodeproj \
            -scheme ltech \
            -destination "platform=iOS Simulator,id=87000D76-496F-4F91-89A7-AF6809C4A611" \
            CODE_SIGNING_ALLOWED=NO \
          | xcbeautify

